<!DOCTYPE html>
<html>
<head>
    <meta charset= "utf-8" />
    <title>schedule maker</title>
    <link rel="stylesheet" href="assets/fonts/stylesheet.css">
    <link rel="stylesheet" href="assets/css/style.css"></head>
</head>
<body>
    <div class="header-wrapper">
        <div class="name-wrapper">
        <h1>Danya Cheng</h1>
        </div>
    </div>
    <div class="navbar">
        <a href="index.html">daynaaa</a>
        <a href="about.html">about me</a>
        <a href="projects.html">projects</a>
    </div>
    <div class="content-wrapper">
        <header>
            <h1>schedule maker</h1>
        </header>
        <div class="input">
            <h2>User Input</h2>
            name:
            <input type="text" id="name"> <br>
            start at:
            <input type="text" id="startAt" placeholder = "(i.e. 8:30 am)">
            end at:
            <input type="text" id="endAt" placeholder = "(i.e. 4:00 pm)"> 
            intervals:
            <input type="text" id="intervals" placeholder = "(i.e. 15)"> <br>

            course name:
            <input type="text" id="courseName">
            start time:
            <input type="text" id="startTime" placeholder = "(i.e. 8:30)">
            end time:
            <input type="text" id="endTime" placeholder = "(i.e. 9:30)">
            days:
            <input type="text" id="days" placeholder = "(i.e. MWF or TT)"> <br>

            <button id="submit">submit</button>
        </div>
        <div class="schedule">
            <h2>
                <span id="schedule"></span>
            </h2>
            <table id="timetable">
                <thead>
                    <tr>
                        <th>time</th>
                        <th>mon</th>
                        <th>tue</th>
                        <th>wed</th>
                        <th>thu</th>
                        <th>fri</th>

                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
    <script>
        var submitButton = document.getElementById('submit');
        var n, sa, ea, cn, st, et, d;

        function removeTableBody(){
            document.getElementById('timetable').getElementsByTagName('tbody')[0].innerHTML = '';
        }   
        function createSchedule(event){

            event.preventDefault();
            removeTableBody();
            var scheduleDiv = document.getElementById(schedule);
            n = document.getElementById("name");
            sa = document.getElementById("startAt").value;
            ea = document.getElementById("endAt").value;
            i = parseInt(document.getElementById("intervals").value);

            cn = document.getElementById("courseName");
            st = document.getElementById("startTime");
            et = document.getElementById("endTime");
            d = document.getElementById("days");

            schedule.innerHTML = n.value+"\'s schedule:";
            const table = document.getElementById("timetable").getElementsByTagName('tbody')[0];

            var startMinutes = convertToMinutes(sa);
            var endMinutes = convertToMinutes(ea);

            for(let a = startMinutes; a <= endMinutes; a += i){
            const table = document.getElementById("timetable").getElementsByTagName('tbody')[0];

                const newRow = table.insertRow(-1);
                const cell1 = newRow.insertCell(0);
                let time = convertToTime(a);
                cell1.innerHTML = time;
            }
            
        }
        submitButton.addEventListener('click',createSchedule);

        function convertToMinutes(timeStr) {
            console.log(timeStr);
            var ampm = timeStr.slice(-2);
            console.log(ampm);
            var timePart = timeStr.slice(0, -3).split(":");
            var hours = parseInt(timePart[0]);
            var minutes = parseInt(timePart[1]);
            if (ampm.toLowerCase() === "pm" && hours !== 12) {
                hours += 12;
            } 
            else if (ampm.toLowerCase() === "am" && hours === 12) {
                hours = 0;
            }
            return hours * 60 + minutes;
        }
        function convertToTime(minutes) {
            var hours = Math.floor(minutes / 60);
            var mins = minutes % 60;
            var ampm = hours >= 12 ? "pm" : "am";
            hours = hours % 12;
            hours = hours ? hours : 12; //midnight
            return ("0" + hours).slice(-2) + ":" + ("0" + mins).slice(-2) + " " + ampm;
        } 
        
    </script>
</body>
</html>